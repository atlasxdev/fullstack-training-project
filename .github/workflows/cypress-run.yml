name: End-to-end tests
on: [push]
env:
    VITE_SUPABASE_URL: "https://dioketiuedohqlaegzhm.supabase.co"
    VITE_SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpb2tldGl1ZWRvaHFsYWVnemhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc1NDI4NTksImV4cCI6MjA1MzExODg1OX0.aOl2aPqWDCvzc1eCenT2cqkSPw87zDc36WB9x1dyxs4"
    VITE_SERVER_URL: "http://localhost:3000/api/users"
jobs:
    cypress-run:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: Run Cypress tests
              uses: cypress-io/github-action@v5
              with:
                  working-directory: ./client
                  start: npm run dev
                  wait-on: "http://localhost:5173"
                  wait-on-timeout: 120
